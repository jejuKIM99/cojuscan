<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' https://cdn.tailwindcss.com; style-src 'self' 'unsafe-inline'; img-src 'self' data:;">
    <title>cojuscan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            /* 기본 레이아웃 색상 */
            --main-bg: #0D0D0D;
            --secondary-bg: #1A1A1A;
            --title-bar-bg: #000000;
            --text-color: #E0E0E0;
            --border-color: #2a2a2a;
            
            /* 주요 상호작용 색상 */
            --accent-color: #00FF41; /* 폴더 아이콘, 도움말 제목 등 */
            --progressbar-color: #00FF41;
            --scrollbar-thumb-color: #00FF41;
            
            /* 버튼 색상 */
            --button-selectdir-bg: #00FF41;
            --button-primary-bg: #3b82f6;
            --button-secondary-bg: #16a34a;
            --button-danger-bg: #dc2626;
            --button-text-color: #000000;
            --button-generic-text-color: #FFFFFF;
            --button-hover-bg: #4a4a4a;

            /* 심각도별 색상 */
            --severity-high-color: #ef4444;
            --severity-medium-color: #f59e0b;
            --severity-low-color: #3b82f6;

            /* 점수 색상 */
            --score-high-color: #00FF41;
            --score-medium-color: #f0db4f;
            --score-low-color: #ff4d4d;
        }

        html, body { height: 100%; overflow: hidden; font-family: 'Inter', sans-serif; }
        body { background-color: var(--main-bg); color: var(--text-color); -ms-overflow-style: none; scrollbar-width: none; }
        body::-webkit-scrollbar { display: none; }
        
        #title-bar { -webkit-app-region: drag; }
        #title-bar-btns { -webkit-app-region: no-drag; }
        .file-tree ul { padding-left: 1rem; }
        .file-tree .folder-label { cursor: pointer; }
        .file-tree .folder-icon::before { content: '📁'; margin-right: 0.5rem; color: var(--accent-color); }
        .file-tree .toggler::before { content: '▶'; display: inline-block; margin-right: 0.5rem; transition: transform 0.1s ease-in-out; color: var(--accent-color); }
        .file-tree .toggler.open::before { transform: rotate(90deg); }
        .file-tree .file-icon { display: inline-flex; align-items: center; justify-content: center; width: 1rem; height: 1rem; margin-right: 0.5rem; color: #9ca3af; flex-shrink: 0; }
        
        #results-container, #file-tree-container, #help-modal-content, #vulnerabilities-list { scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb-color) var(--secondary-bg); }
        #results-container::-webkit-scrollbar, #file-tree-container::-webkit-scrollbar, #help-modal-content::-webkit-scrollbar, #vulnerabilities-list::-webkit-scrollbar { width: 8px; }
        #results-container::-webkit-scrollbar-track, #file-tree-container::-webkit-scrollbar-track, #help-modal-content::-webkit-scrollbar-track, #vulnerabilities-list::-webkit-scrollbar-track { background: var(--secondary-bg); }
        #results-container::-webkit-scrollbar-thumb, #file-tree-container::-webkit-scrollbar-thumb, #help-modal-content::-webkit-scrollbar-thumb, #vulnerabilities-list::-webkit-scrollbar-thumb { background-color: var(--scrollbar-thumb-color); border-radius: 4px; border: 2px solid var(--secondary-bg); }

        .theme-edit-mode [data-theme-var] {
            cursor: pointer;
            outline: 1px dashed rgba(255, 255, 255, 0.5);
            transition: outline-color 0.2s;
        }
        .theme-edit-mode [data-theme-var]:hover {
            outline-color: var(--accent-color);
            outline-width: 2px;
        }
        #color-picker {
            position: absolute; z-index: 100; border: none;
            width: 0; height: 0; padding: 0; opacity: 0;
        }
    </style>
</head>
<body class="select-none text-main" style="background-color: var(--main-bg);">
    <div id="title-bar" class="h-8 flex justify-between items-center fixed top-0 left-0 right-0 z-50" style="background-color: var(--title-bar-bg);" data-theme-var="--title-bar-bg">
        <div class="flex items-center pl-3">
            <div class="text-sm font-bold" style="color: var(--text-color);" data-theme-var="--text-color">cojuscan</div>
            <span id="app-version" class="ml-2 text-xs font-mono text-gray-400"></span>
        </div>
        <div id="title-bar-btns" class="flex items-center h-full">
            <div class="relative">
                <button id="theme-btn" class="px-3 h-full flex items-center transition-colors" style="--button-hover-bg-local: var(--button-hover-bg);" onmouseover="this.style.backgroundColor = this.style.getPropertyValue('--button-hover-bg-local')" onmouseout="this.style.backgroundColor='transparent'" title="Change Theme">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2.69l.34 3.42.92.1-3.46 3.46.1.92 3.42.34-7.46 7.46-1.88-1.88z"></path><path d="M21.5 2.5L19 5.01"></path><path d="M17 9l-2.5 2.5"></path><path d="M2.5 21.5L5 19.01"></path><path d="M9 17l2.5-2.5"></path></svg>
                </button>
                <div id="theme-dropdown" class="hidden absolute right-0 mt-2 w-48 rounded-md shadow-lg text-sm z-50" style="background-color: var(--secondary-bg); border: 1px solid var(--border-color);"></div>
            </div>
            <div class="relative">
                 <button id="lang-btn" class="px-3 h-full flex items-center transition-colors" style="--button-hover-bg-local: var(--button-hover-bg);" onmouseover="this.style.backgroundColor = this.style.getPropertyValue('--button-hover-bg-local')" onmouseout="this.style.backgroundColor='transparent'" title="Change Language">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg>
                </button>
                <div id="lang-dropdown" class="hidden absolute right-0 mt-2 w-28 rounded-md shadow-lg z-50" style="background-color: var(--secondary-bg); border: 1px solid var(--border-color);">
                    <a href="#" class="lang-option block px-4 py-2 text-sm" data-lang="ko">한국어</a>
                    <a href="#" class="lang-option block px-4 py-2 text-sm" data-lang="en">English</a>
                </div>
            </div>
            <button id="minimize-btn" class="px-3 h-full transition-colors" style="--button-hover-bg-local: var(--button-hover-bg);" onmouseover="this.style.backgroundColor = this.style.getPropertyValue('--button-hover-bg-local')" onmouseout="this.style.backgroundColor='transparent'"><svg width="12" height="12" viewBox="0 0 12 12"><rect fill="#E0E0E0" width="10" height="1" x="1" y="6"></rect></svg></button>
            <button id="maximize-btn" class="px-3 h-full transition-colors" style="--button-hover-bg-local: var(--button-hover-bg);" onmouseover="this.style.backgroundColor = this.style.getPropertyValue('--button-hover-bg-local')" onmouseout="this.style.backgroundColor='transparent'">
                <svg id="maximize-icon" width="12" height="12" viewBox="0 0 12 12"><rect width="9" height="9" x="1.5" y="1.5" fill="none" stroke="#E0E0E0" stroke-width="1"></rect></svg>
                <svg id="unmaximize-icon" width="12" height="12" viewBox="0 0 12 12" class="hidden"><path fill="none" stroke="#E0E0E0" stroke-width="1" d="M3.5,3.5 L3.5,8.5 L8.5,8.5 M3.5,3.5 L8.5,3.5 M2.5,2.5 L2.5,7.5 L7.5,7.5"></path></svg>
            </button>
            <button id="close-btn" class="px-3 h-full transition-colors" onmouseover="this.style.backgroundColor='#ef4444'" onmouseout="this.style.backgroundColor='transparent'"><svg width="12" height="12" viewBox="0 0 12 12"><polygon fill="#E0E0E0" points="11 1.576 10.424 1 6 5.424 1.576 1 1 1.576 5.424 6 1 10.424 1.576 11 6 6.576 10.424 11 11 10.424 6.576 6"></polygon></svg></button>
        </div>
    </div>

    <div id="theme-editor-panel" class="hidden fixed top-10 left-1/2 -translate-x-1/2 w-full max-w-md z-50 p-3 rounded-lg shadow-2xl flex items-center space-x-2" style="background-color: var(--title-bar-bg); border: 1px solid var(--border-color);">
        <input type="text" id="custom-theme-name" class="flex-grow p-2 border rounded-md focus:outline-none" style="background-color: var(--main-bg); border-color: var(--border-color); color: var(--text-color);" placeholder="Enter new theme name...">
        <button id="save-theme-btn" class="font-bold py-2 px-4 rounded-lg" style="background-color: var(--button-primary-bg); color: var(--button-generic-text-color);">Add</button>
        <button id="exit-edit-mode-btn" class="font-bold py-2 px-4 rounded-lg" style="background-color: var(--button-danger-bg); color: var(--button-generic-text-color);">Cancel</button>
    </div>

    <div class="flex h-screen pt-8">
        <aside class="w-1/3 p-4 flex flex-col border-r" style="background-color: var(--secondary-bg); border-color: var(--border-color);" data-theme-var="--secondary-bg">
            <div class="flex justify-between items-center mb-4">
                <h1 class="text-xl font-bold" style="color: var(--accent-color);" data-i18n="codeExplorer" data-theme-var="--accent-color">Code Explorer</h1>
                <button id="help-btn" class="text-2xl font-bold text-gray-400 hover:text-white">?</button>
            </div>
            <button id="select-dir-btn" class="w-full font-bold py-2 px-4 rounded-lg transition duration-200 mb-4" style="background-color: var(--button-selectdir-bg); color: var(--button-text-color); border: 1px solid var(--button-selectdir-bg);" data-i18n="selectDirectory" data-theme-var="--button-selectdir-bg" data-theme-var-text="--button-text-color">디렉토리 선택</button>
            <div class="mb-2">
                <input type="text" id="search-input" class="w-full p-2 border rounded-md focus:outline-none focus:ring-2" style="background-color: var(--main-bg); border-color: var(--border-color); --tw-ring-color: var(--accent-color);" data-i18n-placeholder="searchFilesPlaceholder" data-theme-var="--main-bg">
            </div>
            <div class="flex space-x-2 mb-2">
                <button id="select-all-btn" class="flex-1 bg-gray-700 text-sm py-1 px-2 rounded-md" data-i18n="selectAll">전체 선택</button>
                <button id="deselect-all-btn" class="flex-1 bg-gray-700 text-sm py-1 px-2 rounded-md" data-i18n="deselectAll">전체 해제</button>
            </div>
            <div id="file-tree-container" class="file-tree flex-grow overflow-y-auto rounded-lg p-2" style="background-color: var(--main-bg);" data-theme-var="--main-bg">
                <p class="text-gray-500 text-center py-10" data-i18n="selectProjectFolder">프로젝트 폴더를 선택하세요.</p>
            </div>
        </aside>

        <main class="w-2/3 p-6 flex flex-col" style="background-color: var(--main-bg);" data-theme-var="--main-bg">
            <header class="flex justify-between items-center mb-4">
                <h2 class="text-2xl font-bold" style="color: var(--accent-color);" data-i18n="vulnerabilityScan" data-theme-var="--accent-color">Vulnerability Scan</h2>
                <div class="flex space-x-2">
                    <button id="start-scan-simple-btn" class="font-bold py-2 px-4 rounded-lg transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed" style="background-color: var(--button-primary-bg); color: var(--button-generic-text-color);" disabled data-i18n="startSimpleScan" data-theme-var="--button-primary-bg" data-theme-var-text="--button-generic-text-color">단순 검사</button>
                    <button id="start-scan-precision-btn" class="font-bold py-2 px-4 rounded-lg transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed" style="background-color: var(--button-secondary-bg); color: var(--button-generic-text-color);" disabled data-i18n="startPrecisionScan" data-theme-var="--button-secondary-bg" data-theme-var-text="--button-generic-text-color">정밀 검사</button>
                </div>
            </header>
            <div class="flex justify-between items-center mb-6">
                <div class="flex-grow mr-4"> 
                    <h3 class="text-lg font-semibold mb-2" data-i18n="progress">Progress</h3>
                    <div class="w-full bg-gray-700 rounded-full h-2">
                        <div id="progress-bar" class="h-2 rounded-full transition-all duration-300" style="width: 0%; background-color: var(--progressbar-color);" data-theme-var="--progressbar-color"></div>
                    </div>
                    <p id="progress-text" class="text-left text-gray-400 text-sm mt-1">0%</p>
                </div>
                <button id="export-pdf-btn" class="font-bold py-2 px-4 rounded-lg transition duration-200 hidden flex-shrink-0" style="background-color: var(--button-danger-bg); color: var(--button-generic-text-color);" data-i18n="exportReport" data-theme-var="--button-danger-bg" data-theme-var-text="--button-generic-text-color">보고서 출력</button>
            </div>
            <div id="results-container" class="flex-grow rounded-lg p-4 overflow-y-auto border" style="background-color: var(--secondary-bg); border-color: var(--border-color);" data-theme-var="--secondary-bg">
                <p class="text-gray-500 text-center py-10" data-i18n="startScanToSeeResults">검사를 시작하여 취약점 결과를 확인하세요.</p>
            </div>
        </main>
    </div>
    
    <div id="help-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50">
        <div class="rounded-lg shadow-lg p-6 w-3/4 max-w-5xl h-3/4 flex flex-col" style="background-color: var(--secondary-bg); border: 2px solid var(--accent-color);" data-theme-var="--secondary-bg" data-theme-var-border="--accent-color">
            <h2 class="text-2xl font-bold mb-4" style="color: var(--accent-color);" data-i18n="helpTitle" data-theme-var="--accent-color">도움말</h2>
            <button id="close-modal-btn" class="absolute top-4 right-4 text-2xl text-gray-400 hover:text-white">&times;</button>
        </div>
    </div>

    <input type="color" id="color-picker">
    <script src="./renderer.js"></script>
</body>
</html>